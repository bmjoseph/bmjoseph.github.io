<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.53" />


<title>An Interesting Expectation Question - Blog_Name</title>
<meta property="og:title" content="An Interesting Expectation Question - Blog_Name">



  







<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/bmjoseph">GitHub</a></li>
    
    <li><a href="https://www.linkedin.com/in/baileymjoseph/">LinkedIn</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">14 min read</span>
    

    <h1 class="article-title">An Interesting Expectation Question</h1>

    
    <span class="article-date">2018/12/05</span>
    

    <div class="article-content">
      
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotlyjs/plotly-latest.min.js"></script>


<div id="setup" class="section level3">
<h3>Setup</h3>
<p>My friend recently encountered an interesting interview question. Unfortunately, he couldn’t answer it off the top of his head during the interview. We talked about it later – I couldn’t answer it either. The problem intrigued me, so I’ve passed it around but thus far haven’t found anyone who can give an answer without sitting down and thinking privately.</p>
<p>Anyway, here’s the problem:</p>
<p>Suppose you’re going to play a game where you’re going to roll a fair die with sides <span class="math inline">\(\in \{1, 2, ..., 100\}\)</span>. You’ll win money according to the side you roll. For example, if you roll a 13, you’d win 13 dollars. However, if you don’t like your roll, you can also choose to pay an extra dollar to roll again. This option remains open to you forever, so you can keep paying $1 per roll until you’re satisfied with the outcome.</p>
<p>How much is the <strong>first</strong> roll worth? That is, what is the expected profit from this game? Consider that without this question, the first roll would be free.</p>
<p>Before reading on, think about how much you would actually pay to play this game. If you never choose roll again, you’d get an average of 50.5 dollars.</p>
</div>
<div id="solution" class="section level3">
<h3>Solution</h3>
<p>The key observation for this problem is that there is only one real decision for the player to make: a stopping rule. Before the game starts, the player should choose a value that will be their minimum acceptable revenue, and keep rolling until they reach that number or better.</p>
<p>This works because the game is stateless – if re rolling on a 34 is a good idea after the first roll, it must also be a good idea after the second roll, since the lost dollar is already spent.</p>
<p>Solving for the expected profit then:</p>
<p>Let <span class="math inline">\(x\)</span> be the minimum acceptable stopping point, <span class="math inline">\(R\)</span> be the revenue, <span class="math inline">\(C\)</span> be the cost of the extra rolls, and <span class="math inline">\(P\)</span> be the profit.</p>
<p>You’re guaranteed to get between <span class="math inline">\(x\)</span> and 100 dollars revenue, but since each roll is random and fair, you’re equally likely to get any value between <span class="math inline">\(x\)</span> and 100.<br />
<span class="math inline">\(R \sim \operatorname{U} [x, 100 ]\)</span><br />
You’ll have to pay for each roll, and the number of rolls you’ll need before reaching one that’s satisfactory follows a geometric distribution.</p>
<p><span class="math inline">\(C \sim \operatorname{G} \left({\frac{101-x}{100}}\right)\)</span></p>
<p>Of course, <span class="math inline">\(P = R - C\)</span>.<br />
For right now, we only care about the <em>expected</em> profit, and <span class="math inline">\(\mathbb{E}(P) = \mathbb{E}(R) - \mathbb{E}(C)\)</span>.</p>
<p><span class="math inline">\(\mathbb{E}(P) = \frac{100 + x}{2} - \frac{100}{101-x}\)</span><br />
The situation is actually discrete, but for now assume it’s continuous and take a derivative.</p>
<p><span class="math inline">\(\frac{\mathrm{d}\mathbb{E}(P)}{\mathrm{d}x} = \frac{1}{2} - \frac{100}{(101 - x)^2}\)</span><br />
Notice that the derivative is completely continuous and smooth except for when <span class="math inline">\(x = 101\)</span>. <span class="math inline">\(101\)</span> isn’t a valid stopping rule, so we can ignore that issue.<br />
To solve for the optimum, set the derivative equal to 0:</p>
<p><span class="math inline">\(\frac{1}{2} = \frac{100}{(101 - x)^2}\)</span><br />
<span class="math inline">\(x = 101 - 10\sqrt{2}\)</span><br />
<span class="math inline">\(x \approx 86.85\)</span></p>
<p>You can use the first derivate test or some other method to make sure, but this value for <span class="math inline">\(x\)</span> turns out to be a maximum. Since we have to choose a whole number, 87 is the best we can do (you should check 86 and 87, but 87 is better).</p>
<p><span class="math inline">\(\mathbb{E}(P) = \frac{100 + 87}{2} - \frac{100}{101-87}\)</span><br />
<span class="math inline">\(\mathbb{E}(P) \approx 93.5 - 7.14\)</span><br />
<span class="math inline">\(\mathbb{E}(P) \approx 86.35\)</span>.</p>
<p>This is much higher than I would have imagined. I knew that the answer had to be at least 50.5, becuase the option to roll again can’t <em>hurt</em> you, but 86 dollars?</p>
</div>
<div id="simulation" class="section level3">
<h3>Simulation</h3>
<p>I still couldn’t completely accept that playing this game is really worth 86 dollars. People are risk averse, so even if that would cause me to break even in expectation, I probably only want to play if I’m expected to win.</p>
<p>I decided to simulate the game with different stopping rules and see what happens over many repitions of the game.</p>
<p>First, I just checked to see if I could confirm that 87 is the best stopping rule and that the expected profit is about 86.35.</p>
<div id="18de259482dc" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18de259482dc">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[50.537,51.331,51.484,52.375,52.796,54.127,53.377,54.181,54.922,54.789,56.188,56.622,55.791,56.746,57.23,57.528,59.331,57.62,58.905,58.632,60.92,60.846,61.906,61.306,62.294,63.16,64.576,64.599,65.26,65.022,64.113,66.611,66.863,67.334,67.143,67.974,67.442,68.646,68.618,70.403,69.613,70.452,69.765,71.609,71.907,72.453,72.892,72.597,73.83,73.851,74.655,74.894,76.512,75.892,76.112,76.783,77.175,77.761,77.969,78.675,79.702,79.13,80.045,80.435,80.635,80.95,81.27,81.557,82.266,82.413,82.687,83.759,83.856,84.117,84.221,85.465,85.182,85.971,86.14,86.52,86.3,86.917,86.806,87.222,87.157,87.012,87.393,87.317,87.297,87.165,86.654,85.494,84.785,83.941,82.631,79.861,73.73,66.467,48.292,-1.683],"text":["stopping_rule:   1<br />mean_profit: 50.537","stopping_rule:   2<br />mean_profit: 51.331","stopping_rule:   3<br />mean_profit: 51.484","stopping_rule:   4<br />mean_profit: 52.375","stopping_rule:   5<br />mean_profit: 52.796","stopping_rule:   6<br />mean_profit: 54.127","stopping_rule:   7<br />mean_profit: 53.377","stopping_rule:   8<br />mean_profit: 54.181","stopping_rule:   9<br />mean_profit: 54.922","stopping_rule:  10<br />mean_profit: 54.789","stopping_rule:  11<br />mean_profit: 56.188","stopping_rule:  12<br />mean_profit: 56.622","stopping_rule:  13<br />mean_profit: 55.791","stopping_rule:  14<br />mean_profit: 56.746","stopping_rule:  15<br />mean_profit: 57.230","stopping_rule:  16<br />mean_profit: 57.528","stopping_rule:  17<br />mean_profit: 59.331","stopping_rule:  18<br />mean_profit: 57.620","stopping_rule:  19<br />mean_profit: 58.905","stopping_rule:  20<br />mean_profit: 58.632","stopping_rule:  21<br />mean_profit: 60.920","stopping_rule:  22<br />mean_profit: 60.846","stopping_rule:  23<br />mean_profit: 61.906","stopping_rule:  24<br />mean_profit: 61.306","stopping_rule:  25<br />mean_profit: 62.294","stopping_rule:  26<br />mean_profit: 63.160","stopping_rule:  27<br />mean_profit: 64.576","stopping_rule:  28<br />mean_profit: 64.599","stopping_rule:  29<br />mean_profit: 65.260","stopping_rule:  30<br />mean_profit: 65.022","stopping_rule:  31<br />mean_profit: 64.113","stopping_rule:  32<br />mean_profit: 66.611","stopping_rule:  33<br />mean_profit: 66.863","stopping_rule:  34<br />mean_profit: 67.334","stopping_rule:  35<br />mean_profit: 67.143","stopping_rule:  36<br />mean_profit: 67.974","stopping_rule:  37<br />mean_profit: 67.442","stopping_rule:  38<br />mean_profit: 68.646","stopping_rule:  39<br />mean_profit: 68.618","stopping_rule:  40<br />mean_profit: 70.403","stopping_rule:  41<br />mean_profit: 69.613","stopping_rule:  42<br />mean_profit: 70.452","stopping_rule:  43<br />mean_profit: 69.765","stopping_rule:  44<br />mean_profit: 71.609","stopping_rule:  45<br />mean_profit: 71.907","stopping_rule:  46<br />mean_profit: 72.453","stopping_rule:  47<br />mean_profit: 72.892","stopping_rule:  48<br />mean_profit: 72.597","stopping_rule:  49<br />mean_profit: 73.830","stopping_rule:  50<br />mean_profit: 73.851","stopping_rule:  51<br />mean_profit: 74.655","stopping_rule:  52<br />mean_profit: 74.894","stopping_rule:  53<br />mean_profit: 76.512","stopping_rule:  54<br />mean_profit: 75.892","stopping_rule:  55<br />mean_profit: 76.112","stopping_rule:  56<br />mean_profit: 76.783","stopping_rule:  57<br />mean_profit: 77.175","stopping_rule:  58<br />mean_profit: 77.761","stopping_rule:  59<br />mean_profit: 77.969","stopping_rule:  60<br />mean_profit: 78.675","stopping_rule:  61<br />mean_profit: 79.702","stopping_rule:  62<br />mean_profit: 79.130","stopping_rule:  63<br />mean_profit: 80.045","stopping_rule:  64<br />mean_profit: 80.435","stopping_rule:  65<br />mean_profit: 80.635","stopping_rule:  66<br />mean_profit: 80.950","stopping_rule:  67<br />mean_profit: 81.270","stopping_rule:  68<br />mean_profit: 81.557","stopping_rule:  69<br />mean_profit: 82.266","stopping_rule:  70<br />mean_profit: 82.413","stopping_rule:  71<br />mean_profit: 82.687","stopping_rule:  72<br />mean_profit: 83.759","stopping_rule:  73<br />mean_profit: 83.856","stopping_rule:  74<br />mean_profit: 84.117","stopping_rule:  75<br />mean_profit: 84.221","stopping_rule:  76<br />mean_profit: 85.465","stopping_rule:  77<br />mean_profit: 85.182","stopping_rule:  78<br />mean_profit: 85.971","stopping_rule:  79<br />mean_profit: 86.140","stopping_rule:  80<br />mean_profit: 86.520","stopping_rule:  81<br />mean_profit: 86.300","stopping_rule:  82<br />mean_profit: 86.917","stopping_rule:  83<br />mean_profit: 86.806","stopping_rule:  84<br />mean_profit: 87.222","stopping_rule:  85<br />mean_profit: 87.157","stopping_rule:  86<br />mean_profit: 87.012","stopping_rule:  87<br />mean_profit: 87.393","stopping_rule:  88<br />mean_profit: 87.317","stopping_rule:  89<br />mean_profit: 87.297","stopping_rule:  90<br />mean_profit: 87.165","stopping_rule:  91<br />mean_profit: 86.654","stopping_rule:  92<br />mean_profit: 85.494","stopping_rule:  93<br />mean_profit: 84.785","stopping_rule:  94<br />mean_profit: 83.941","stopping_rule:  95<br />mean_profit: 82.631","stopping_rule:  96<br />mean_profit: 79.861","stopping_rule:  97<br />mean_profit: 73.730","stopping_rule:  98<br />mean_profit: 66.467","stopping_rule:  99<br />mean_profit: 48.292","stopping_rule: 100<br />mean_profit: -1.683"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"Simulation of Different Stopping Rules","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-3.95,104.95],"ticktext":["0","25","50","75","100"],"tickvals":[-4.44089209850063e-16,25,50,75,100],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"Stopping Rule","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-6.1368,91.8468],"ticktext":["0","25","50","75"],"tickvals":[-8.88178419700125e-16,25,50,75],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Mean Profit","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest"},"source":"A","attrs":{"18de4009956c":{"x":{},"y":{},"type":"ggplotly"},"18de3531064c":{"x":{},"y":{}}},"cur_data":"18de4009956c","visdat":{"18de4009956c":["function (y) ","x"],"18de3531064c":["function (y) ","x"]},"config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>I only ran 1000 simulations for each stopping rule, but it converged quickly enough. You can mouse over the above graph and see individula results for yourself.</p>
<p>However, I was also interested in the expected profit if the player gets “unlucky”. To define unlucky, I plotted the 5^th percentile profits from each stopping rule (if being 5^th percentile unlucky is good enough to risk a false positive in a statistical test, it’s good enough for me):</p>
<div id="18de523fd150" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18de523fd150">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[5,7,7,8,10,10,11,11,13,14,15.95,15,16,18,17,19,20,21,23,23,25,25,27,27,28,29,30,31,32,33,34,35,35.95,36,37,38,39,40,41,42,43,44,44,45,46.95,48,48,49,50,51,52,53,54,55,56,57,57,58,59,61,61,62,63,63,64,66,66,67,68,68,69,70,70,71,72,73,73,74,74,74,75,75,74,74,73,75,74,73,69.95,68.95,65,63.95,58,56,48,38,23,-2.09999999999999,-54,-204.2],"text":["stopping_rule:   1<br />fifth_quantile:    5.00","stopping_rule:   2<br />fifth_quantile:    7.00","stopping_rule:   3<br />fifth_quantile:    7.00","stopping_rule:   4<br />fifth_quantile:    8.00","stopping_rule:   5<br />fifth_quantile:   10.00","stopping_rule:   6<br />fifth_quantile:   10.00","stopping_rule:   7<br />fifth_quantile:   11.00","stopping_rule:   8<br />fifth_quantile:   11.00","stopping_rule:   9<br />fifth_quantile:   13.00","stopping_rule:  10<br />fifth_quantile:   14.00","stopping_rule:  11<br />fifth_quantile:   15.95","stopping_rule:  12<br />fifth_quantile:   15.00","stopping_rule:  13<br />fifth_quantile:   16.00","stopping_rule:  14<br />fifth_quantile:   18.00","stopping_rule:  15<br />fifth_quantile:   17.00","stopping_rule:  16<br />fifth_quantile:   19.00","stopping_rule:  17<br />fifth_quantile:   20.00","stopping_rule:  18<br />fifth_quantile:   21.00","stopping_rule:  19<br />fifth_quantile:   23.00","stopping_rule:  20<br />fifth_quantile:   23.00","stopping_rule:  21<br />fifth_quantile:   25.00","stopping_rule:  22<br />fifth_quantile:   25.00","stopping_rule:  23<br />fifth_quantile:   27.00","stopping_rule:  24<br />fifth_quantile:   27.00","stopping_rule:  25<br />fifth_quantile:   28.00","stopping_rule:  26<br />fifth_quantile:   29.00","stopping_rule:  27<br />fifth_quantile:   30.00","stopping_rule:  28<br />fifth_quantile:   31.00","stopping_rule:  29<br />fifth_quantile:   32.00","stopping_rule:  30<br />fifth_quantile:   33.00","stopping_rule:  31<br />fifth_quantile:   34.00","stopping_rule:  32<br />fifth_quantile:   35.00","stopping_rule:  33<br />fifth_quantile:   35.95","stopping_rule:  34<br />fifth_quantile:   36.00","stopping_rule:  35<br />fifth_quantile:   37.00","stopping_rule:  36<br />fifth_quantile:   38.00","stopping_rule:  37<br />fifth_quantile:   39.00","stopping_rule:  38<br />fifth_quantile:   40.00","stopping_rule:  39<br />fifth_quantile:   41.00","stopping_rule:  40<br />fifth_quantile:   42.00","stopping_rule:  41<br />fifth_quantile:   43.00","stopping_rule:  42<br />fifth_quantile:   44.00","stopping_rule:  43<br />fifth_quantile:   44.00","stopping_rule:  44<br />fifth_quantile:   45.00","stopping_rule:  45<br />fifth_quantile:   46.95","stopping_rule:  46<br />fifth_quantile:   48.00","stopping_rule:  47<br />fifth_quantile:   48.00","stopping_rule:  48<br />fifth_quantile:   49.00","stopping_rule:  49<br />fifth_quantile:   50.00","stopping_rule:  50<br />fifth_quantile:   51.00","stopping_rule:  51<br />fifth_quantile:   52.00","stopping_rule:  52<br />fifth_quantile:   53.00","stopping_rule:  53<br />fifth_quantile:   54.00","stopping_rule:  54<br />fifth_quantile:   55.00","stopping_rule:  55<br />fifth_quantile:   56.00","stopping_rule:  56<br />fifth_quantile:   57.00","stopping_rule:  57<br />fifth_quantile:   57.00","stopping_rule:  58<br />fifth_quantile:   58.00","stopping_rule:  59<br />fifth_quantile:   59.00","stopping_rule:  60<br />fifth_quantile:   61.00","stopping_rule:  61<br />fifth_quantile:   61.00","stopping_rule:  62<br />fifth_quantile:   62.00","stopping_rule:  63<br />fifth_quantile:   63.00","stopping_rule:  64<br />fifth_quantile:   63.00","stopping_rule:  65<br />fifth_quantile:   64.00","stopping_rule:  66<br />fifth_quantile:   66.00","stopping_rule:  67<br />fifth_quantile:   66.00","stopping_rule:  68<br />fifth_quantile:   67.00","stopping_rule:  69<br />fifth_quantile:   68.00","stopping_rule:  70<br />fifth_quantile:   68.00","stopping_rule:  71<br />fifth_quantile:   69.00","stopping_rule:  72<br />fifth_quantile:   70.00","stopping_rule:  73<br />fifth_quantile:   70.00","stopping_rule:  74<br />fifth_quantile:   71.00","stopping_rule:  75<br />fifth_quantile:   72.00","stopping_rule:  76<br />fifth_quantile:   73.00","stopping_rule:  77<br />fifth_quantile:   73.00","stopping_rule:  78<br />fifth_quantile:   74.00","stopping_rule:  79<br />fifth_quantile:   74.00","stopping_rule:  80<br />fifth_quantile:   74.00","stopping_rule:  81<br />fifth_quantile:   75.00","stopping_rule:  82<br />fifth_quantile:   75.00","stopping_rule:  83<br />fifth_quantile:   74.00","stopping_rule:  84<br />fifth_quantile:   74.00","stopping_rule:  85<br />fifth_quantile:   73.00","stopping_rule:  86<br />fifth_quantile:   75.00","stopping_rule:  87<br />fifth_quantile:   74.00","stopping_rule:  88<br />fifth_quantile:   73.00","stopping_rule:  89<br />fifth_quantile:   69.95","stopping_rule:  90<br />fifth_quantile:   68.95","stopping_rule:  91<br />fifth_quantile:   65.00","stopping_rule:  92<br />fifth_quantile:   63.95","stopping_rule:  93<br />fifth_quantile:   58.00","stopping_rule:  94<br />fifth_quantile:   56.00","stopping_rule:  95<br />fifth_quantile:   48.00","stopping_rule:  96<br />fifth_quantile:   38.00","stopping_rule:  97<br />fifth_quantile:   23.00","stopping_rule:  98<br />fifth_quantile:   -2.10","stopping_rule:  99<br />fifth_quantile:  -54.00","stopping_rule: 100<br />fifth_quantile: -204.20"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"Unlucky Simulation","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-3.95,104.95],"ticktext":["0","25","50","75","100"],"tickvals":[-4.44089209850063e-16,25,50,75,100],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"Stopping Rule","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-218.16,88.96],"ticktext":["-200","-100","0"],"tickvals":[-200,-100,0],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Mean Profit","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest"},"source":"A","attrs":{"18de4df5097f":{"x":{},"y":{},"type":"ggplotly"},"18de124298d5":{"x":{},"y":{}}},"cur_data":"18de4df5097f","visdat":{"18de4df5097f":["function (y) ","x"],"18de124298d5":["function (y) ","x"]},"config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>87 still seems to be the best choice for a stopping rule (down to simulation uncertaintly at least.) Even if you think you’ll get unlucky, you’re still expected to make about 75 dollars from the game.</p>
<p>Finally, I’ll plot the quantiles for the profit assuming that we take 87 for granted as the best stopping rule. This can help you find your own maximum willingness to pay – just look for whatever y value matches up to your luck on the x axis. Farther to the right on the axis means luckier. For example, if you think you’ll be luckier than 90% of people, then you could expect to make 96 dollars profit with the 87 stopping rule.</p>
<div id="18de4f09c18" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18de4f09c18">{"x":{"data":[{"x":[0.01,0.02,0.03,0.04,0.05,0.06,0.07,0.08,0.09,0.1,0.11,0.12,0.13,0.14,0.15,0.16,0.17,0.18,0.19,0.2,0.21,0.22,0.23,0.24,0.25,0.26,0.27,0.28,0.29,0.3,0.31,0.32,0.33,0.34,0.35,0.36,0.37,0.38,0.39,0.4,0.41,0.42,0.43,0.44,0.45,0.46,0.47,0.48,0.49,0.5,0.51,0.52,0.53,0.54,0.55,0.56,0.57,0.58,0.59,0.6,0.61,0.62,0.63,0.64,0.65,0.66,0.67,0.68,0.69,0.7,0.71,0.72,0.73,0.74,0.75,0.76,0.77,0.78,0.79,0.8,0.81,0.82,0.83,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.94,0.95,0.96,0.97,0.98,0.99,1],"y":[64,68,70,72,73,75,76,77,77,78,79,79,80,80,81,81,81,82,82,82,83,83,83,84,84,84,84,85,85,85,85,85,86,86,86,86,86,86,87,87,87,87,87,87,88,88,88,88,88,88,89,89,89,89,89,89,90,90,90,90,90,90,91,91,91,91,91,92,92,92,92,92,92,93,93,93,93,93,94,94,94,94,94,95,95,95,95,96,96,96,96,97,97,97,98,98,98,99,99,100],"text":["luck_quantile: 0.01<br />profit:  64","luck_quantile: 0.02<br />profit:  68","luck_quantile: 0.03<br />profit:  70","luck_quantile: 0.04<br />profit:  72","luck_quantile: 0.05<br />profit:  73","luck_quantile: 0.06<br />profit:  75","luck_quantile: 0.07<br />profit:  76","luck_quantile: 0.08<br />profit:  77","luck_quantile: 0.09<br />profit:  77","luck_quantile: 0.10<br />profit:  78","luck_quantile: 0.11<br />profit:  79","luck_quantile: 0.12<br />profit:  79","luck_quantile: 0.13<br />profit:  80","luck_quantile: 0.14<br />profit:  80","luck_quantile: 0.15<br />profit:  81","luck_quantile: 0.16<br />profit:  81","luck_quantile: 0.17<br />profit:  81","luck_quantile: 0.18<br />profit:  82","luck_quantile: 0.19<br />profit:  82","luck_quantile: 0.20<br />profit:  82","luck_quantile: 0.21<br />profit:  83","luck_quantile: 0.22<br />profit:  83","luck_quantile: 0.23<br />profit:  83","luck_quantile: 0.24<br />profit:  84","luck_quantile: 0.25<br />profit:  84","luck_quantile: 0.26<br />profit:  84","luck_quantile: 0.27<br />profit:  84","luck_quantile: 0.28<br />profit:  85","luck_quantile: 0.29<br />profit:  85","luck_quantile: 0.30<br />profit:  85","luck_quantile: 0.31<br />profit:  85","luck_quantile: 0.32<br />profit:  85","luck_quantile: 0.33<br />profit:  86","luck_quantile: 0.34<br />profit:  86","luck_quantile: 0.35<br />profit:  86","luck_quantile: 0.36<br />profit:  86","luck_quantile: 0.37<br />profit:  86","luck_quantile: 0.38<br />profit:  86","luck_quantile: 0.39<br />profit:  87","luck_quantile: 0.40<br />profit:  87","luck_quantile: 0.41<br />profit:  87","luck_quantile: 0.42<br />profit:  87","luck_quantile: 0.43<br />profit:  87","luck_quantile: 0.44<br />profit:  87","luck_quantile: 0.45<br />profit:  88","luck_quantile: 0.46<br />profit:  88","luck_quantile: 0.47<br />profit:  88","luck_quantile: 0.48<br />profit:  88","luck_quantile: 0.49<br />profit:  88","luck_quantile: 0.50<br />profit:  88","luck_quantile: 0.51<br />profit:  89","luck_quantile: 0.52<br />profit:  89","luck_quantile: 0.53<br />profit:  89","luck_quantile: 0.54<br />profit:  89","luck_quantile: 0.55<br />profit:  89","luck_quantile: 0.56<br />profit:  89","luck_quantile: 0.57<br />profit:  90","luck_quantile: 0.58<br />profit:  90","luck_quantile: 0.59<br />profit:  90","luck_quantile: 0.60<br />profit:  90","luck_quantile: 0.61<br />profit:  90","luck_quantile: 0.62<br />profit:  90","luck_quantile: 0.63<br />profit:  91","luck_quantile: 0.64<br />profit:  91","luck_quantile: 0.65<br />profit:  91","luck_quantile: 0.66<br />profit:  91","luck_quantile: 0.67<br />profit:  91","luck_quantile: 0.68<br />profit:  92","luck_quantile: 0.69<br />profit:  92","luck_quantile: 0.70<br />profit:  92","luck_quantile: 0.71<br />profit:  92","luck_quantile: 0.72<br />profit:  92","luck_quantile: 0.73<br />profit:  92","luck_quantile: 0.74<br />profit:  93","luck_quantile: 0.75<br />profit:  93","luck_quantile: 0.76<br />profit:  93","luck_quantile: 0.77<br />profit:  93","luck_quantile: 0.78<br />profit:  93","luck_quantile: 0.79<br />profit:  94","luck_quantile: 0.80<br />profit:  94","luck_quantile: 0.81<br />profit:  94","luck_quantile: 0.82<br />profit:  94","luck_quantile: 0.83<br />profit:  94","luck_quantile: 0.84<br />profit:  95","luck_quantile: 0.85<br />profit:  95","luck_quantile: 0.86<br />profit:  95","luck_quantile: 0.87<br />profit:  95","luck_quantile: 0.88<br />profit:  96","luck_quantile: 0.89<br />profit:  96","luck_quantile: 0.90<br />profit:  96","luck_quantile: 0.91<br />profit:  96","luck_quantile: 0.92<br />profit:  97","luck_quantile: 0.93<br />profit:  97","luck_quantile: 0.94<br />profit:  97","luck_quantile: 0.95<br />profit:  98","luck_quantile: 0.96<br />profit:  98","luck_quantile: 0.97<br />profit:  98","luck_quantile: 0.98<br />profit:  99","luck_quantile: 0.99<br />profit:  99","luck_quantile: 1.00<br />profit: 100"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"Optimal Profit Quantiles","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-0.0395,1.0495],"ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"Luck Quantile","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[62.2,101.8],"ticktext":["70","80","90","100"],"tickvals":[70,80,90,100],"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Profit","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest"},"source":"A","attrs":{"18de46618b97":{"x":{},"y":{},"type":"ggplotly"},"18de2e138a9a":{"x":{},"y":{}}},"cur_data":"18de46618b97","visdat":{"18de46618b97":["function (y) ","x"],"18de2e138a9a":["function (y) ","x"]},"config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    

    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

